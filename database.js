const AcademicDatabase = {
    currentLanguage: 'en',

    translations: {
        en: {
            // HOME PAGE
            home: "Home",
            main_title: "Academic Staff Directory",
            main_subtitle: "Quick access to faculty and office information",
            search_placeholder: "Search by name, department or office number...",
            
            // NAVIGATION
            office_list: "Office List",
            requests: "Requests",
            contact: "Contact",
            admin_panel: "Admin Panel",
            
            // PROFESSOR DETAIL
            weekly_schedule: "Weekly Schedule",
            office_professors: "Professors in this Office",
            shared_equipment: "Shared Equipment",
            
            // SCHEDULE TABLE
            time: "Time",
            monday: "Monday",
            tuesday: "Tuesday",
            wednesday: "Wednesday",
            thursday: "Thursday",
            friday: "Friday",
            
            // COMMON
            professor: "Professor",
            office: "Office",
            no_results: "No results found for your search.",
            no_offices: "No offices found on this floor.",
            
            // FLOORS
            floor_1: "1st Floor",
            floor_2: "2nd Floor",
            floor_3: "3rd Floor",
            floor_4: "4th Floor",
            
            // OFFICE LIST
            all_offices: "All Offices",
            grid_view: "Grid View",
            list_view: "List View",
            all_floors: "All Floors",
            all_departments: "All Departments",
            
            // CONTACT
            contact_info: "Contact Information",
            general_inquiries: "General Inquiries",
            email: "Email",
            campus_address: "Campus Address",
            office_management: "Office Management",
            for_academic_inquiries: "For general academic inquiries",
            working_hours: "Monday - Friday, 9:00 - 17:00",
            for_office_changes: "For office assignments and changes",
            quick_links: "Quick Links",
            search_directory: "Search Directory",
            admin_access: "Admin Access",
            university_website: "University Website",
            
            // BACK BUTTON
            back_home: "Back to Home",
            back: "Back",

            // DEPARTMENTS
            dept_computer: "Computer Engineering",
            dept_software: "Software Engineering",
            dept_mechanical: "Mechanical Engineering",
            dept_civil: "Civil Engineering",
            dept_electrical: "Electrical-Electronics Eng.",
            dept_math: "Mathematics",
            dept_physics: "Physics",
            dept_architecture: "Architecture",
            dept_literature: "Literature",
            dept_admin: "Administration",
            
            // REQUESTS SECTION
            submit_request: "Submit a Request",
            request_subtitle: "Request appointments, equipment, or other needs",
            request_appointment: "Appointment Request",
            request_appointment_desc: "Request a meeting with a professor",
            request_equipment: "Equipment Request",
            request_equipment_desc: "Request equipment from a shared office",
            request_maintenance: "Maintenance Request",
            request_maintenance_desc: "Report issues with office equipment",
            request_other: "Other Request",
            request_other_desc: "Submit other types of requests",
            
            // REQUEST FORM
            select_professor: "Select Professor",
            select_office: "Select Office",
            request_date: "Preferred Date",
            request_time: "Preferred Time",
            request_reason: "Reason for Request",
            equipment_name: "Equipment Name",
            issue_description: "Issue Description",
            request_details: "Request Details",
            submit_request_btn: "Submit Request",
            request_success: "Request submitted successfully!"
        },
        tr: {
            // HOME PAGE
            home: "Ana Sayfa",
            main_title: "Akademik Personel Rehberi",
            main_subtitle: "Hoca ve ofis bilgilerine hƒ±zlƒ±ca ula≈üƒ±n",
            search_placeholder: "ƒ∞sim, b√∂l√ºm veya ofis numarasƒ± ile arayƒ±n...",
            
            // NAVIGATION
            office_list: "Ofis Listesi",
            requests: "Talepler",
            contact: "ƒ∞leti≈üim",
            admin_panel: "Y√∂netici Paneli",
            
            // PROFESSOR DETAIL
            weekly_schedule: "Haftalƒ±k Program",
            office_professors: "Bu Ofisteki Hocalar",
            shared_equipment: "Ortak Kullanƒ±lan Ekipmanlar",
            
            // SCHEDULE TABLE
            time: "Saat",
            monday: "Pazartesi",
            tuesday: "Salƒ±",
            wednesday: "√áar≈üamba",
            thursday: "Per≈üembe",
            friday: "Cuma",
            
            // COMMON
            professor: "Hoca",
            office: "Ofis",
            no_results: "Aramanƒ±zla e≈üle≈üen sonu√ß bulunamadƒ±.",
            no_offices: "Bu katta ofis bulunmamaktadƒ±r.",
            
            // FLOORS
            floor_1: "1. Kat",
            floor_2: "2. Kat",
            floor_3: "3. Kat",
            floor_4: "4. Kat",
            
            // OFFICE LIST
            all_offices: "T√ºm Ofisler",
            grid_view: "Grid G√∂r√ºn√ºm√º",
            list_view: "Liste G√∂r√ºn√ºm√º",
            all_floors: "T√ºm Katlar",
            all_departments: "T√ºm B√∂l√ºmler",
            
            // CONTACT
            contact_info: "ƒ∞leti≈üim Bilgileri",
            general_inquiries: "Genel Bilgiler",
            email: "E-posta",
            campus_address: "Kamp√ºs Adresi",
            office_management: "Ofis Y√∂netimi",
            for_academic_inquiries: "Genel akademik sorgular i√ßin",
            working_hours: "Pazartesi - Cuma, 09:00 - 17:00",
            for_office_changes: "Ofis atamalarƒ± ve deƒüi≈üiklikleri i√ßin",
            quick_links: "Hƒ±zlƒ± Baƒülantƒ±lar",
            search_directory: "Dizinde Ara",
            admin_access: "Y√∂netici Eri≈üimi",
            university_website: "√úniversite Web Sitesi",
            
            // BACK BUTTON
            back_home: "Ana Sayfaya D√∂n",
            back: "Geri",

            // DEPARTMENTS
            dept_computer: "Bilgisayar M√ºhendisliƒüi",
            dept_software: "Yazƒ±lƒ±m M√ºhendisliƒüi",
            dept_mechanical: "Makine M√ºhendisliƒüi",
            dept_civil: "ƒ∞n≈üaat M√ºhendisliƒüi",
            dept_electrical: "Elektrik-Elektronik M√ºh.",
            dept_math: "Matematik",
            dept_physics: "Fizik",
            dept_architecture: "Mimarlƒ±k",
            dept_literature: "Edebiyat",
            dept_admin: "ƒ∞dari",
            
            // REQUESTS SECTION
            submit_request: "Talep G√∂nder",
            request_subtitle: "Randevu, ekipman veya diƒüer ihtiya√ßlar i√ßin talep olu≈üturun",
            request_appointment: "Randevu Talebi",
            request_appointment_desc: "Bir hoca ile g√∂r√º≈üme talebi olu≈üturun",
            request_equipment: "Ekipman Talebi",
            request_equipment_desc: "Ortak ofisten ekipman talebi",
            request_maintenance: "Bakƒ±m Talebi",
            request_maintenance_desc: "Ofis ekipmanƒ± sorunlarƒ±nƒ± bildirin",
            request_other: "Diƒüer Talep",
            request_other_desc: "Diƒüer talep t√ºrlerini g√∂nderin",
            
            // REQUEST FORM
            select_professor: "Hoca Se√ßin",
            select_office: "Ofis Se√ßin",
            request_date: "Tercih Edilen Tarih",
            request_time: "Tercih Edilen Saat",
            request_reason: "Talep Nedeni",
            equipment_name: "Ekipman Adƒ±",
            issue_description: "Sorun A√ßƒ±klamasƒ±",
            request_details: "Talep Detaylarƒ±",
            submit_request_btn: "Talep G√∂nder",
            request_success: "Talep ba≈üarƒ±yla g√∂nderildi!"
        }
    },

    setLanguage: function(lang) {
        this.currentLanguage = lang;
        this.updateUITexts();
        localStorage.setItem('preferredLanguage', lang);
    },

    t: function(key) {
        return this.translations[this.currentLanguage][key] || key;
    },

    updateUITexts: function() {
        // 1. T√ºm data-i18n √∂zelliƒüi olan elementleri g√ºncelle
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (this.translations[this.currentLanguage][key]) {
                element.textContent = this.t(key);
            }
        });

        // 2. Placeholder'larƒ± g√ºncelle
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            element.placeholder = this.t(key);
        });

        // 3. Floor tab'larƒ±nƒ± g√ºncelle
        document.querySelectorAll('[data-floor]').forEach(tab => {
            const floor = tab.dataset.floor;
            if (this.translations[this.currentLanguage][`floor_${floor.slice(-1)}`]) {
                tab.textContent = this.t(`floor_${floor.slice(-1)}`);
            }
        });

        // 4. Option'larƒ± g√ºncelle
        document.querySelectorAll('option[data-i18n]').forEach(option => {
            const key = option.getAttribute('data-i18n');
            if (this.translations[this.currentLanguage][key]) {
                option.textContent = this.t(key);
            }
        });

        // 5. Select'lerin placeholder option'larƒ±nƒ± g√ºncelle
        document.querySelectorAll('select option[value=""]').forEach(option => {
            if (option.hasAttribute('data-i18n')) {
                const key = option.getAttribute('data-i18n');
                option.textContent = this.t(key);
            }
        });

        // 6. Button value'larƒ±nƒ± g√ºncelle
        document.querySelectorAll('button[data-i18n]').forEach(button => {
            const key = button.getAttribute('data-i18n');
            if (this.translations[this.currentLanguage][key]) {
                button.textContent = this.t(key);
            }
        });

        // 7. Input value'larƒ±nƒ± g√ºncelle
        document.querySelectorAll('input[data-i18n-value]').forEach(input => {
            const key = input.getAttribute('data-i18n-value');
            if (this.translations[this.currentLanguage][key]) {
                input.value = this.t(key);
            }
        });
    },

    getOffices: function(floor = 'floor1') {
        return new Promise((resolve) => {
            setTimeout(() => {
                resolve(this.officeData[floor] || []);
            }, 100);
        });
    },

    getAllOffices: function() {
        return new Promise((resolve) => {
            setTimeout(() => {
                const allOffices = [];
                for (const floor in this.officeData) {
                    allOffices.push(...this.officeData[floor]);
                }
                resolve(allOffices);
            }, 100);
        });
    },

    getProfessor: function(professorId) {
        return new Promise((resolve) => {
            setTimeout(() => {
                const professor = this.findProfessorById(professorId);
                resolve(professor);
            }, 100);
        });
    },

    getOfficeDetail: function(officeId) {
        return new Promise((resolve) => {
            setTimeout(() => {
                const office = this.findOfficeById(officeId);
                resolve(office);
            }, 100);
        });
    },

    search: function(query) {
        return new Promise((resolve) => {
            setTimeout(() => {
                const results = this.performSearch(query);
                resolve(results);
            }, 150);
        });
    },

    officeData: {
        floor1: [
            {
                id: "101",
                floor: "1st Floor",
                location: "North Corridor",
                professors: [
                    { id: 1, name: "Prof. Dr. Ahmet Demir", department: "Computer Engineering" },
                    { id: 2, name: "Assoc. Prof. Dr. Zeynep Kaya", department: "Software Engineering" }
                ],
                sharedEquipment: ["üñ®Ô∏è 3D Printer", "üíª 2x Desktop Computers", "üìû Conference System"]
            },
            {
                id: "102",
                floor: "1st Floor", 
                location: "South Corridor",
                professors: [
                    { id: 3, name: "Dr. √ñƒür. √úyesi Mehmet Yƒ±ldƒ±z", department: "Electrical-Electronics Eng." }
                ],
                sharedEquipment: ["üíª 1x Desktop Computer", "üìû Telephone", "üñ®Ô∏è Laser Printer"]
            },
            {
                id: "103",
                floor: "1st Floor", 
                location: "East Corridor",
                professors: [
                    { id: 7, name: "Prof. Dr. Fatma Arslan", department: "Mathematics" }
                ],
                sharedEquipment: ["üíª 1x Computer", "üì± Tablet", "‚úèÔ∏è Whiteboard"]
            }
        ],
        floor2: [
            {
                id: "201",
                floor: "2nd Floor",
                location: "East Corridor", 
                professors: [
                    { id: 4, name: "Prof. Dr. Ay≈üe Yƒ±lmaz", department: "Mechanical Engineering" }
                ],
                sharedEquipment: ["üíª 2x Computers", "üìä Projector", "üñ®Ô∏è Scanner"]
            },
            {
                id: "202",
                floor: "2nd Floor",
                location: "West Corridor", 
                professors: [
                    { id: 5, name: "Prof. Dr. Mustafa √ñzt√ºrk", department: "Civil Engineering" }
                ],
                sharedEquipment: ["üíª 1x Computer", "üì± Tablet", "üéß Headphones"]
            },
            {
                id: "203",
                floor: "2nd Floor",
                location: "Main Hall", 
                professors: [
                    { id: 8, name: "Assoc. Prof. Dr. Ali ≈ûahin", department: "Physics" }
                ],
                sharedEquipment: ["üíª 2x Computers", "üî¨ Lab Equipment", "üìö Books"]
            }
        ],
        floor3: [
            {
                id: "301",
                floor: "3rd Floor",
                location: "Main Corridor", 
                professors: [
                    { id: 6, name: "Prof. Dr. Elif ≈ûahin", department: "Architecture" }
                ],
                sharedEquipment: ["üíª 2x iMac", "‚úèÔ∏è Drawing Tablets", "üìê Architecture Tools"]
            },
            {
                id: "302",
                floor: "3rd Floor",
                location: "Library Wing", 
                professors: [
                    { id: 9, name: "Prof. Dr. Can Yƒ±lmaz", department: "Literature" }
                ],
                sharedEquipment: ["üíª 1x Computer", "üìñ Book Scanner", "üñ®Ô∏è Color Printer"]
            }
        ],
        floor4: [
            {
                id: "401",
                floor: "4th Floor",
                location: "Executive Wing", 
                professors: [
                    { id: 10, name: "Prof. Dr. Hasan Yƒ±ldƒ±rƒ±m", department: "Administration" }
                ],
                sharedEquipment: ["üíª 3x Computers", "üìû Phone System", "üñ®Ô∏è Multifunction Printer"]
            }
        ]
    },

    professorDetails: {
        1: {
            id: 1,
            name: "Prof. Dr. Ahmet Demir",
            department: "Computer Engineering",
            email: "ahmet.demir@final.edu.tr",
            phone: "+90 (312) 123 45 67",
            extension: "101",
            office: "101",
            schedule: {
                monday: [
                    { time: "09:00-11:00", type: "lecture", title: "Algorithms" },
                    { time: "14:00-16:00", type: "office", title: "Office Hours" }
                ],
                tuesday: [
                    { time: "10:00-12:00", type: "lecture", title: "Data Structures" }
                ],
                wednesday: [
                    { time: "13:00-15:00", type: "office", title: "Office Hours" }
                ],
                thursday: [],
                friday: [
                    { time: "09:00-12:00", type: "lecture", title: "Artificial Intelligence" }
                ]
            },
            personalEquipment: ["üíª MacBook Pro", "üìä Graphics Tablet"]
        },
        2: {
            id: 2,
            name: "Assoc. Prof. Dr. Zeynep Kaya",
            department: "Software Engineering",
            email: "zeynep.kaya@final.edu.tr",
            phone: "+90 (312) 123 45 68",
            extension: "102",
            office: "101",
            schedule: {
                monday: [
                    { time: "10:00-12:00", type: "lecture", title: "Web Programming" }
                ],
                tuesday: [
                    { time: "14:00-16:00", type: "office", title: "Office Hours" }
                ],
                wednesday: [
                    { time: "09:00-11:00", type: "lecture", title: "Mobile Applications" }
                ],
                thursday: [
                    { time: "13:00-15:00", type: "office", title: "Office Hours" }
                ],
                friday: []
            },
            personalEquipment: ["üíª Dell XPS", "üì± Test Devices"]
        },
        3: {
            id: 3,
            name: "Dr. √ñƒür. √úyesi Mehmet Yƒ±ldƒ±z",
            department: "Electrical-Electronics Eng.",
            email: "mehmet.yildiz@final.edu.tr",
            phone: "+90 (312) 123 45 69",
            extension: "103",
            office: "102",
            schedule: {
                monday: [
                    { time: "13:00-15:00", type: "lecture", title: "Circuit Theory" }
                ],
                tuesday: [
                    { time: "09:00-11:00", type: "office", title: "Office Hours" }
                ],
                wednesday: [
                    { time: "10:00-12:00", type: "lecture", title: "Signal Processing" }
                ],
                thursday: [
                    { time: "14:00-16:00", type: "lecture", title: "Electronics" }
                ],
                friday: [
                    { time: "11:00-13:00", type: "office", title: "Office Hours" }
                ]
            },
            personalEquipment: ["üíª ThinkPad", "üîå Measurement Tools"]
        }
    },

    findProfessorById: function(id) {
        return this.professorDetails[id] || null;
    },

    findOfficeById: function(officeId) {
        for (const floor in this.officeData) {
            const office = this.officeData[floor].find(office => office.id === officeId);
            if (office) return office;
        }
        return null;
    },

    findFloorByOfficeId: function(officeId) {
        for (const floor in this.officeData) {
            const office = this.officeData[floor].find(o => o.id === officeId);
            if (office) return floor;
        }
        return 'floor1';
    },

    performSearch: function(query) {
        if (!query) return [];
        
        const results = [];
        const lowerQuery = query.toLowerCase();
        
        for (const floor in this.officeData) {
            this.officeData[floor].forEach(office => {
                if (office.id.toLowerCase().includes(lowerQuery)) {
                    results.push({ type: 'office', data: office });
                }
                
                office.professors.forEach(professor => {
                    if (professor.name.toLowerCase().includes(lowerQuery) || 
                        professor.department.toLowerCase().includes(lowerQuery)) {
                        results.push({ type: 'professor', data: professor });
                    }
                });
            });
        }
        
        return results;
    },

    getAllProfessors: function() {
        const professors = [];
        for (const id in this.professorDetails) {
            professors.push(this.professorDetails[id]);
        }
        return professors;
    },

    getAllOfficesSimple: function() {
        const offices = [];
        for (const floor in this.officeData) {
            offices.push(...this.officeData[floor]);
        }
        return offices;
    },

    // Translate helper function
    translate: function(key) {
        const lang = this.currentLanguage || 'en';
        return this.translations[lang][key] || key;
    },

    // Initialize language
    initLanguage: function() {
        const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
        this.currentLanguage = savedLanguage;
    }
};

// Sayfa y√ºklendiƒüinde dili ba≈ülat
if (typeof document !== 'undefined') {
    document.addEventListener('DOMContentLoaded', function() {
        AcademicDatabase.initLanguage();
    });
}